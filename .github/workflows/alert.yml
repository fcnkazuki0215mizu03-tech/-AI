name: stock-alert-mailer

on:
  workflow_dispatch:
  schedule:
    - cron: "30 23 * * 0-4"
    - cron: "10 7 * * 1-5"

jobs:
  run:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    - uses: actions/setup-python@v5
with:
    python-version: "3.11"
    - name: Install dependencies
      run: pip install yfinance pandas
    - name: Run alert bot
      env:
        GMAIL_USER: ${{ secrets.GMAIL_USER }}
        GMAIL_APP_PASSWORD: ${{ secrets.GMAIL_APP_PASSWORD }}
        MAIL_TO: ${{ secrets.MAIL_TO }}
        TICKERS: "PLTR MRVL 6506.T 6702.T"
        run: python alert_bot.py
